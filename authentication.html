
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Server-side Authentication &#8212; Enigma Data Marketplace 0.4 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/theme_overrides.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Data Sets" href="data-sets.html" />
    <link rel="prev" title="Data Providers" href="data-providers.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="data-sets.html" title="Data Sets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="data-providers.html" title="Data Providers"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Enigma Data Marketplace 0.4 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="server-side-authentication">
<h1>Server-side Authentication<a class="headerlink" href="#server-side-authentication" title="Permalink to this headline">¶</a></h1>
<p>The first implementation of the Enigma Data Marketplace is designed to integrate
with Catalyst on the application layer. Until the Enigma network is up and
running, a temporary implementation of the functionality that will be provided
by the network in the future is offered by an authentication server hosted in
the cloud.</p>
<p>When a user running Catalyst on their local machine requests to ingest a data
set they are subscribed to, Catalyst routes that request to the authentication
server. The authentication scheme used between client and server is an
implementation of digest access authentication using the user’s private and
public cryptographic keys, without the client ever handling their private key
directly.</p>
<p>When the user requests access to a subscribed data set, their Catalyst client
opens a session with the authentication server. The server replies back with a
challenge that includes a <code class="docutils literal notranslate"><span class="pre">nonce</span></code> and an <code class="docutils literal notranslate"><span class="pre">opaque</span></code> as specified in
<a class="reference external" href="https://tools.ietf.org/html/rfc2617#section-3.2.1">RFC 2617</a>. The client then
requests the <code class="docutils literal notranslate"><span class="pre">nonce</span></code> to be hashed and signed using the user’s private key.
The client replies to the authentication server with the signature of the
hashed <code class="docutils literal notranslate"><span class="pre">nonce</span></code> and the <code class="docutils literal notranslate"><span class="pre">opaque</span></code> untouched. The server validates that the
<code class="docutils literal notranslate"><span class="pre">nonce</span></code> and <code class="docutils literal notranslate"><span class="pre">opaque</span></code> are valid, and verifies that the signature corresponds
with the user’s public address. If successful, queries the smart contract to
validate that the user’s public address holds and active subscrition to the
requested data set, and if successful responds with the requested data set back
to the client, thereby completing the request.</p>
<img alt="Digest Authentication" class="align-center" src="https://s3.amazonaws.com/enigmaco-docs/digest-authentication.png" />
<p>All blockchain implementations, and Ethereum in particular, use public-key
cryptography in their addressing scheme. Each address on the blockchain is
associated with a private and a public key, where the private key is secret,
the public key can be mathematically derived from the private key, and the
public address is a hash+checksum of the public key. It is critical that the
private key is not leaked, otherwise whoever has access to the private key gains
full control of its associated address.</p>
<p>Instead of Catalyst handling any private keys to authenticate requests, Catalyst
supports external wallets that handle the user’s private keys, and can sign
transactions on their behalf. Catalyst requests any of the supported wallets to
sign a transaction on behalf of the user (the wallet will require the user to
enter a password to unlock their account), and returns the signature to Catalyst
so that it can continue with the authentication process.</p>
<div class="section" id="signature-implementation">
<h2>Signature Implementation<a class="headerlink" href="#signature-implementation" title="Permalink to this headline">¶</a></h2>
<p>The digest authentication scheme for Enigma’s Data Marketplace uses an
Ethereum-compatible signature implementation that adds a custom Ethereum
message and length using the following structure:</p>
<div class="code python highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">message_to_sign</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
         <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\x19</span><span class="s2">Ethereum Signed Message:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">message</span><span class="p">))</span> <span class="o">+</span> <span class="n">message</span>
         <span class="k">return</span> <span class="n">sha3</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<p>where the <code class="docutils literal notranslate"><span class="pre">sha3()</span></code> is Ethereum’s implementation of the
<a class="reference external" href="https://keccak.team/index.html">KECCAK-256</a> cryptographic hash function,
albeit it does not follow the
<a class="reference external" href="https://keccak.team/specifications.html#FIPS_202">FIPS-202</a> based standard
(a.k.a SHA-3).</p>
</div>
<div class="section" id="supported-wallets">
<h2>Supported Wallets<a class="headerlink" href="#supported-wallets" title="Permalink to this headline">¶</a></h2>
<p>The wallets currently supported by Catalyst to access the Data Marketplace are:</p>
<ul class="simple">
<li>MyEtherWallet</li>
<li>Any other wallet that allows to sign transactions through the MyEtherWallet
online interface:<ul>
<li>MetaMask / Mist</li>
<li>Ledger Wallet</li>
<li>TREZOR</li>
<li>Digital Bitbox</li>
<li>Keystore / JSON File</li>
</ul>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Server-side Authentication</a><ul>
<li><a class="reference internal" href="#signature-implementation">Signature Implementation</a></li>
<li><a class="reference internal" href="#supported-wallets">Supported Wallets</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="data-providers.html"
                        title="previous chapter">Data Providers</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="data-sets.html"
                        title="next chapter">Data Sets</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/authentication.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="data-sets.html" title="Data Sets"
             >next</a> |</li>
        <li class="right" >
          <a href="data-providers.html" title="Data Providers"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Enigma Data Marketplace 0.4 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Enigma MPC, Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>