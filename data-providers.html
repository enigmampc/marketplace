
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Data Providers &#8212; Enigma Data Marketplace 0.4 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/css/theme_overrides.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Server-side Authentication" href="authentication.html" />
    <link rel="prev" title="Data Subscribers" href="data-subscribers.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="authentication.html" title="Server-side Authentication"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="data-subscribers.html" title="Data Subscribers"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Enigma Data Marketplace 0.4 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="data-providers">
<h1>Data Providers<a class="headerlink" href="#data-providers" title="Permalink to this headline">¶</a></h1>
<p>As a data provider, you can publish your data sets to the Enigma Data
Marketplace and get rewarded in ENG tokens. As a provider, you set the price of
your data sets for monthly subscriptions. The Enigma Data Marketplace is
governed by a <a class="reference internal" href="smart-contract.html"><span class="doc">smart contract</span></a> that brokers all the
transactions in the marketplace.</p>
<div class="section" id="data-sets">
<h2>Data Sets<a class="headerlink" href="#data-sets" title="Permalink to this headline">¶</a></h2>
<p>A data set may contain any data which fits in a tabular format.
However, since data will be consumed by Catalyst for the purpose of
algorithmic trading, it must have some predictable properties. All data sets
must be structured as time series, which must contain these two columns:</p>
<ul class="simple">
<li>Date: The date/time of the event corresponding to each row of the
data set.</li>
<li>Symbol: The symbol of the currency of the market associated with each event.
If an event involves more that one currency or market, multiple entries can
be provided with a semicolon separator.</li>
</ul>
<p>Here are the applicable data type conventions:</p>
<ul>
<li><p class="first">String: String (or text) data must surrounded with double-quotes</p>
</li>
<li><p class="first">Date/Time: Both date and date/time types are supported. The date fields
should be represented as a <em>String</em> following the <em>ISO 8601</em> format using the
appropriate level of precision. Valid examples include:</p>
<blockquote>
<div><ul class="simple">
<li>“2017-11-01” or “2017-11-1” (for November 1st, 2017)</li>
<li>“2017-12-14 23:00” (for December 14th, 2017 at 11:00PM)</li>
</ul>
</div></blockquote>
<p>Dates should default to UTC for the timezone.</p>
</li>
<li><p class="first">Numbers: Numbers should be provided as integer or floats without quotes.
Use as many decimals as necessary.</p>
</li>
</ul>
<p>This sample data set contains market cap information:</p>
<table border="1" cellpadding="2" cellspacing="1" width=656 style='table-layout:fixed;width:492pt; font-size:0.85em'>
 <tr height='21' style='font-weight:bold'>
  <td style='width:180pt' bgcolor='#cccccc' align='center'>date</td>
  <td style='width:55pt'  bgcolor='#cccccc' align='center'>symbol</td>
  <td style='width:100pt' bgcolor='#cccccc' align='center'>day_volume_usd</td>
  <td style='width:100pt' bgcolor='#cccccc' align='center'>available_supply</td>
  <td style='width:100pt' bgcolor='#cccccc' align='center'>market_cap_usd</td>
 </tr>
 <tr height=21 style='height:16.0pt'>
  <td height=21 style='height:16.0pt'>2018-01-22 00:42:00+00:00</td>
  <td>btc</td>
  <td align=right>10010200064</td>
  <td align=right>16817962</td>
  <td align=right>197321785344</td>
 </tr>
 <tr height=21 style='height:16.0pt'>
  <td height=21 style='height:16.0pt'>2018-01-22 00:42:00+00:00</td>
  <td>eth</td>
  <td align=right>3380800000</td>
  <td align=right>97128896</td>
  <td align=right>103240245248</td>
 </tr>
 <tr height=21 style='height:16.0pt'>
  <td height=21 style='height:16.0pt'>2018-01-22 00:42:00+00:00</td>
  <td>xrp</td>
  <td align=right>2935330048</td>
  <td align=right>38739144704</td>
  <td align=right>54674878464</td>
 </tr>
 <tr height=21 style='height:16.0pt'>
  <td height=21 style='height:16.0pt'>2018-01-22 00:42:00+00:00</td>
  <td>bch</td>
  <td align=right>737806976</td>
  <td align=right>16924476</td>
  <td align=right>30479964160</td>
 </tr>
 <tr height=21 style='height:16.0pt'>
  <td height=21 style='height:16.0pt'>2018-01-22 00:42:00+00:00</td>
  <td>ada</td>
  <td align=right>822998976</td>
  <td align=right>25927069696</td>
  <td align=right>15821813760</td>
 </tr>
 <tr height=21 style='height:16.0pt'>
  <td height=21 style='height:16.0pt'>2018-01-22 00:42:00+00:00</td>
  <td>ltc</td>
  <td align=right>465356000</td>
  <td align=right>54861960</td>
  <td align=right>10571514880</td>
 </tr>
 <tr height=21 style='height:16.0pt'>
  <td height=21 style='height:16.0pt'>2018-01-22 00:42:00+00:00</td>
  <td>xem</td>
  <td align=right>99484704</td>
  <td align=right>8999999488</td>
  <td align=right>9715949568</td>
 </tr>
 <tr height=21 style='height:16.0pt'>
  <td height=21 style='height:16.0pt'>2018-01-22 00:42:00+00:00</td>
  <td>neo</td>
  <td align=right>355087008</td>
  <td align=right>65000000</td>
  <td align=right>8795799552</td>
 </tr>
</table><div class="line-block">
<div class="line"><br /></div>
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="data-frequency-and-availability">
<h2>Data Frequency and Availability<a class="headerlink" href="#data-frequency-and-availability" title="Permalink to this headline">¶</a></h2>
<p>Data frequency and availability associated fields must be provided when
registering each data source, as per the scheme outlined below:</p>
<ul>
<li><p class="first">Data frequency: How frequently do data events occur?</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">daily</span></code>: Publish one event each day at a set time.</li>
<li><code class="docutils literal notranslate"><span class="pre">hourly</span></code>: Publish one event each hour between a set range of
minutes.</li>
<li><code class="docutils literal notranslate"><span class="pre">minute</span></code>: Publish one event each minute between a set range
of seconds.</li>
</ul>
</div></blockquote>
</li>
<li><p class="first">Data Availability:</p>
<blockquote>
<div><ul class="simple">
<li>Historical: The dataset includes historical data.</li>
<li>Live: Data events will be published at the specified
frequency on an ongoing basis.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="registering-data-sets">
<h2>Registering Data Sets<a class="headerlink" href="#registering-data-sets" title="Permalink to this headline">¶</a></h2>
<p>To register a new data set, download and install the Catalyst client.
Then, use the <code class="docutils literal notranslate"><span class="pre">catalyst</span> <span class="pre">marketplace</span> <span class="pre">register</span></code> command. In this example, data
is published multiple times per hour at a variable time:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ catalyst marketplace register
Enter the name of the dataset to register: <span class="nb">test</span>
Enter the price <span class="k">for</span> a monthly subscription to this dataset in ENG: <span class="m">10</span>
Enter the data frequency <span class="o">[</span>daily, hourly, minute<span class="o">]</span>: daily
Does it include historical data? <span class="o">[</span>default: Y<span class="o">]</span>:
Doest it include live data? <span class="o">[</span>default: Y<span class="o">]</span>:
</pre></div>
</div>
</div>
<div class="section" id="publishing-historical-data">
<h2>Publishing Historical Data<a class="headerlink" href="#publishing-historical-data" title="Permalink to this headline">¶</a></h2>
<p>To upload data in an registered data set, use the <code class="docutils literal notranslate"><span class="pre">catalyst</span> <span class="pre">marketplace</span> <span class="pre">publish</span></code>
command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ catalyst marketplace publish --dataset<span class="o">=</span><span class="nb">test</span> --datadir<span class="o">=</span>~/test-data/
</pre></div>
</div>
<p>Upon execution, Catalyst will automatically identify, validate and upload
the data in all CSV files directly inside the specified <code class="docutils literal notranslate"><span class="pre">datadir</span></code>. It will not
scan recursively.</p>
<p>The file naming convention is inconsequential; Catalyst will process any
file with a CSV extension. As long as the data is correctly represented, it
can be contained in one file or split across multiple files.</p>
<p>On error, Catalyst simply stops and displays the error in the standard output.
It does not roll-back the files already published.</p>
</div>
<div class="section" id="publishing-live-data">
<h2>Publishing Live Data<a class="headerlink" href="#publishing-live-data" title="Permalink to this headline">¶</a></h2>
<p>Publishing live data works the same as publishing historical data running the
same command every time new data is available:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ catalyst marketplace publish --dataset<span class="o">=</span><span class="nb">test</span> --datadir<span class="o">=</span>~/test-data/
</pre></div>
</div>
</div>
<div class="section" id="withdraw-tokens-owed">
<h2>Withdraw Tokens Owed<a class="headerlink" href="#withdraw-tokens-owed" title="Permalink to this headline">¶</a></h2>
<p>As a publisher, you are entitled to receive ENG tokens from those who have subscribed
to your dataset in accordance with the subscription cycle. You can check to see how many
ENG tokens you can withdraw at this given moment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ catalyst marketplace get_withdraw_amount --dataset<span class="o">=</span><span class="nb">test</span>
</pre></div>
</div>
<p>To carry out the withdrawal transaction, run this command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ catalyst marketplace withdraw --dataset<span class="o">=</span><span class="nb">test</span>
</pre></div>
</div>
</div>
<div class="section" id="publishers-api">
<h2>Publishers’ API<a class="headerlink" href="#publishers-api" title="Permalink to this headline">¶</a></h2>
<p>In order to facilitate the process of automating the publication of live data,
the Data Marketplace provides the following Application Programming Interface
(API).</p>
<p>Base URL: <code class="docutils literal notranslate"><span class="pre">http://data.enigma.co</span></code></p>
<div class="section" id="authentication">
<h3>Authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h3>
<p>The endpoint requires an API key/secret pair. Use the catalyst client to publish
data once manually, and it will generate the key/secret pair for you, and store
it in the following location: <code class="docutils literal notranslate"><span class="pre">$HOME/.catalyst/data/marketplace/addresses.json</span></code>
from where you can retrieve it to use it programmatically.</p>
<p>In your API request, you have to include the following HTTP headers: <br />
(example code provided in Python)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">hashlib</span>
<span class="kn">import</span> <span class="nn">hmac</span>

<span class="k">def</span> <span class="nf">get_signed_headers</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">secret</span><span class="p">):</span>
  <span class="n">nonce</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">))</span>

  <span class="n">signature</span> <span class="o">=</span> <span class="n">hmac</span><span class="o">.</span><span class="n">new</span><span class="p">(</span>
        <span class="n">secret</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span>
        <span class="s1">&#39;{}{}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">nonce</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span>
        <span class="n">hashlib</span><span class="o">.</span><span class="n">sha512</span>
  <span class="p">)</span><span class="o">.</span><span class="n">hexdigest</span><span class="p">()</span>

  <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Sign&#39;</span><span class="p">:</span> <span class="n">signature</span><span class="p">,</span>
        <span class="s1">&#39;Key&#39;</span><span class="p">:</span> <span class="n">key</span><span class="p">,</span>
        <span class="s1">&#39;Nonce&#39;</span><span class="p">:</span> <span class="n">nonce</span><span class="p">,</span>
        <span class="s1">&#39;Dataset&#39;</span><span class="p">:</span> <span class="n">dataset</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="n">headers</span>
</pre></div>
</div>
<p>The nonce must be a monotonically increasing counter (in the example above
generated using the number of seconds since the <cite>epoch</cite>), and the signature is
the keyed-hash of the concatenation of the name of the dataset for which you
want to publish data and the nonce, encrypted with the secret.</p>
</div>
<div class="section" id="publish-endpoint">
<h3>Publish endpoint<a class="headerlink" href="#publish-endpoint" title="Permalink to this headline">¶</a></h3>
<p>The endpoint used for publishing data is located at <code class="docutils literal notranslate"><span class="pre">/marketplace/publish</span></code>,
and it only accepts <code class="docutils literal notranslate"><span class="pre">POST</span></code> requests. If you try to visit the endpoint with
your browser, you will get a <strong>Method Not Allowed</strong> error because by default the
browser will use <code class="docutils literal notranslate"><span class="pre">GET</span></code> to retrieve the page, and it will fail.</p>
<p>You need to include the files you want to upload in the request as follows:<br />
(example code provided in Python)</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">requests</span>

<span class="n">BASE_URL</span> <span class="o">=</span> <span class="s1">&#39;https://data.enigma.co&#39;</span>

<span class="n">dataset</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>    <span class="c1"># specify your dataset</span>
<span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>        <span class="c1"># specify your key</span>
<span class="n">secret</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>     <span class="c1"># specify your secret</span>
<span class="n">datadir</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>    <span class="c1"># specify your data folder</span>

<span class="n">filenames</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">datadir</span><span class="p">,</span> <span class="s1">&#39;*.csv&#39;</span><span class="p">))</span>

<span class="k">if</span> <span class="ow">not</span> <span class="n">filenames</span><span class="p">:</span>
  <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;No files to upload.&#39;</span><span class="p">)</span>

<span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">filenames</span><span class="p">:</span>
    <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="s1">&#39;file&#39;</span><span class="p">,</span> <span class="nb">open</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)))</span>

<span class="n">headers</span> <span class="o">=</span> <span class="n">get_signed_headers</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">secret</span><span class="p">)</span>

<span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s1">&#39;{}/marketplace/publish&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">BASE_URL</span><span class="p">),</span>
                  <span class="n">files</span><span class="o">=</span><span class="n">files</span><span class="p">,</span>
                  <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

<span class="k">if</span> <span class="n">r</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Error uploading file: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">status_code</span><span class="p">))</span>

<span class="k">if</span> <span class="s1">&#39;error&#39;</span> <span class="ow">in</span> <span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">():</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Error uploading file: {}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">r</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;error&#39;</span><span class="p">])</span>

<span class="k">print</span><span class="p">(</span><span class="s1">&#39;Dataset {} uploaded successfully.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">dataset</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Data Providers</a><ul>
<li><a class="reference internal" href="#data-sets">Data Sets</a></li>
<li><a class="reference internal" href="#data-frequency-and-availability">Data Frequency and Availability</a></li>
<li><a class="reference internal" href="#registering-data-sets">Registering Data Sets</a></li>
<li><a class="reference internal" href="#publishing-historical-data">Publishing Historical Data</a></li>
<li><a class="reference internal" href="#publishing-live-data">Publishing Live Data</a></li>
<li><a class="reference internal" href="#withdraw-tokens-owed">Withdraw Tokens Owed</a></li>
<li><a class="reference internal" href="#publishers-api">Publishers’ API</a><ul>
<li><a class="reference internal" href="#authentication">Authentication</a></li>
<li><a class="reference internal" href="#publish-endpoint">Publish endpoint</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="data-subscribers.html"
                        title="previous chapter">Data Subscribers</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="authentication.html"
                        title="next chapter">Server-side Authentication</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/data-providers.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="authentication.html" title="Server-side Authentication"
             >next</a> |</li>
        <li class="right" >
          <a href="data-subscribers.html" title="Data Subscribers"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Enigma Data Marketplace 0.4 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Enigma MPC, Inc..
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.5.
    </div>
  </body>
</html>